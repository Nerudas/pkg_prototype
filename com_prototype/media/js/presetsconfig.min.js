(function(a){a(document).ready(function(){a("[data-input-presetsconfig]").each(function(){var f=a(this),h=f.attr("id"),g=f.find('.item[data-key="preset_X"]'),b=f.find("#"+h+"_result"),e=f.closest("form");if(!f.selector){f.selector="#"+f.attr("id")}d();a("body").on("click",f.selector+" .actions .add",function(){d()});a("body").on("click",f.selector+" .actions .remove",function(){a(this).closest(".item").remove();if(b.find(".item").length==0){d()}c()});a(b.selector).sortable({handle:".actions .move",start:function(i,j){b.addClass("sortable")},stop:function(i,j){c();b.removeClass("sortable")}});a(e).on("submit",function(){b.find('[name*="value"]').each(function(k,j){if(a(j).val()==""){a(j).closest(".item").remove();c()}})});function d(){console.log(g);var i=g.clone();a(i).find("input").each(function(k,j){a(j).attr("id",a(j).data("id"));a(j).attr("name",a(j).data("name"));a(j).removeAttr("data-id");a(j).removeAttr("data-name")});a(i).appendTo(b);c()}function c(){b.find(".item").each(function(j,l){var m=a(l).attr("data-key");var k="preset";var n=new RegExp(m,"g");a(l).find('[id*="'+k+'_"]').each(function(i,o){var p=a(o).attr("id").replace(n,k+"_"+(j+1));a(o).attr("id",p)});a(l).find('[name*="'+k+'_"]').each(function(i,o){var p=a(o).attr("name").replace(n,k+"_"+(j+1));a(o).attr("name",p)});a(l).attr("data-key",k+"_"+(j+1))})}})})})(jQuery);